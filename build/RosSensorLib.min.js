!function n(s,o,i){function a(e,t){if(!o[e]){if(!s[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(u)return u(e,!0);throw(t=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t}r=o[e]={exports:{}},s[e][0].call(r.exports,function(t){return a(s[e][1][t]||t)},r,r.exports,n,s,o,i)}return o[e].exports}for(var u="function"==typeof require&&require,t=0;t<i.length;t++)a(i[t]);return a}({1:[function(t,At,kt){!function(Ut){!function(){var n="__lodash_hash_undefined__",B=1,K=2,M=9007199254740991,U="[object Arguments]",A="[object Array]",S="[object AsyncFunction]",J="[object Boolean]",Q="[object Date]",X="[object Error]",I="[object Function]",L="[object GeneratorFunction]",k="[object Map]",Y="[object Number]",T="[object Null]",F="[object Object]",j="[object Promise]",x="[object Proxy]",Z="[object RegExp]",N="[object Set]",tt="[object String]",et="[object Symbol]",O="[object Undefined]",r="[object WeakMap]",rt="[object ArrayBuffer]",z="[object DataView]",R=/^\[object .+?Constructor\]$/,C=/^(?:0|[1-9]\d*)$/,e={},t=(e["[object Float32Array]"]=e["[object Float64Array]"]=e["[object Int8Array]"]=e["[object Int16Array]"]=e["[object Int32Array]"]=e["[object Uint8Array]"]=e["[object Uint8ClampedArray]"]=e["[object Uint16Array]"]=e["[object Uint32Array]"]=!0,e[U]=e[A]=e[rt]=e[J]=e[z]=e[Q]=e[X]=e[I]=e[k]=e[Y]=e[F]=e[Z]=e[N]=e[tt]=e[r]=!1,"object"==typeof Ut&&Ut&&Ut.Object===Object&&Ut),s="object"==typeof self&&self&&self.Object===Object&&self,s=t||s||Function("return this")(),o="object"==typeof kt&&kt&&!kt.nodeType&&kt,i=o&&"object"==typeof At&&At&&!At.nodeType&&At,i=i&&i.exports===o,a=i&&t.process,o=function(){try{return a&&a.binding&&a.binding("util")}catch(t){}}(),t=o&&o.isTypedArray;function nt(t){var r=-1,n=Array(t.size);return t.forEach(function(t,e){n[++r]=[e,t]}),n}function st(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var D,q,o=Array.prototype,u=Function.prototype,h=Object.prototype,c=s["__core-js_shared__"],ot=u.toString,H=h.hasOwnProperty,it=(u=/[^.]+$/.exec(c&&c.keys&&c.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"",at=h.toString,ut=RegExp("^"+ot.call(H).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),c=i?s.Buffer:void 0,u=s.Symbol,ht=s.Uint8Array,ct=h.propertyIsEnumerable,pt=o.splice,p=u?u.toStringTag:void 0,lt=Object.getOwnPropertySymbols,i=c?c.isBuffer:void 0,dt=(D=Object.keys,q=Object,function(t){return D(q(t))}),o=_(s,"DataView"),l=_(s,"Map"),c=_(s,"Promise"),d=_(s,"Set"),s=_(s,"WeakMap"),f=_(Object,"create"),ft=P(o),mt=P(l),bt=P(c),gt=P(d),wt=P(s),u=u?u.prototype:void 0,vt=u?u.valueOf:void 0;function m(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function b(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function g(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function w(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new g;++e<r;)this.add(t[e])}function G(t){t=this.__data__=new b(t);this.size=t.size}function yt(t,e){var r,n,s,o=V(t),i=!o&&jt(t),a=!o&&!i&&xt(t),u=!o&&!i&&!a&&qt(t),h=o||i||a||u,c=h?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],p=c.length;for(r in t)!e&&!H.call(t,r)||h&&("length"==r||a&&("offset"==r||"parent"==r)||u&&("buffer"==r||"byteLength"==r||"byteOffset"==r)||(n=r,(s=null==(s=p)?M:s)&&("number"==typeof n||C.test(n))&&-1<n&&n%1==0&&n<s))||c.push(r);return c}function v(t,e){for(var r=t.length;r--;)if(Tt(t[r][0],e))return r;return-1}function y(t){{if(null==t)return void 0===t?O:T;if(p&&p in Object(t)){var e=t,r=H.call(e,p),n=e[p];try{var s=!(e[p]=void 0)}catch(t){}var o=at.call(e);return s&&(r?e[p]=n:delete e[p]),o}return at.call(t)}}function Et(t){return W(t)&&y(t)==U}function _t(t,e,r,n,s){{if(t===e)return!0;if(null==t||null==e||!W(t)&&!W(e))return t!=t&&e!=e;var o=_t,i=V(t),a=V(e),u=i?A:$(t),a=a?A:$(e),h=(u=u==U?F:u)==F,c=(a=a==U?F:a)==F,a;if((a=u==a)&&xt(t)){if(!xt(e))return!1;h=!(i=!0)}if(a&&!h){s=s||new G;if(i||qt(t))return St(t,e,r,n,o,s);else{var p=t;var l=e;var d=u;var f=r;var m=n;var b=o;var g=s;switch(d){case z:if(p.byteLength!=l.byteLength||p.byteOffset!=l.byteOffset)return!1;p=p.buffer,l=l.buffer;case rt:return p.byteLength==l.byteLength&&b(new ht(p),new ht(l))?!0:!1;case J:case Q:case Y:return Tt(+p,+l);case X:return p.name==l.name&&p.message==l.message;case Z:case tt:return p==l+"";case k:var w=nt;case N:var v=f&B;if(w=w||st,p.size!=l.size&&!v)return!1;v=g.get(p);if(v)return v==l;f|=K,g.set(p,l);v=St(w(p),w(l),f,m,b,g);return g.delete(p),v;case et:if(vt)return vt.call(p)==vt.call(l)}return!1;return}}if(!(r&B)){var i=h&&H.call(t,"__wrapped__"),u=c&&H.call(e,"__wrapped__");if(i||u)return h=i?t.value():t,c=u?e.value():e,s=s||new G,o(h,c,r,n,s)}if(a){s=s||new G;var y=t,E=e,_=r,P=n,M=o,S=s,I=_&B,L=It(y),T=L.length,i=It(E).length;if(T!=i&&!I)return!1;for(var j=T;j--;){var x=L[j];if(!(I?x in E:H.call(E,x)))return!1}if((i=S.get(y))&&S.get(E))return i==E;for(var O=!0,R=(S.set(y,E),S.set(E,y),I);++j<T;){x=L[j];var C,D=y[x],q=E[x];if(!(void 0===(C=P?I?P(q,D,x,E,y,S):P(D,q,x,y,E,S):C)?D===q||M(D,q,_,P,S):C)){O=!1;break}R=R||"constructor"==x}return O&&!R&&(i=y.constructor,u=E.constructor,i!=u&&"constructor"in y&&"constructor"in E&&!("function"==typeof i&&i instanceof i&&"function"==typeof u&&u instanceof u)&&(O=!1)),S.delete(y),S.delete(E),O}return!1}}function Pt(t){var e;if(Ct(t)&&(e=t,!(it&&it in e)))return(Ot(t)?ut:R).test(P(t))}function Mt(t){if(r="function"==typeof(r=(e=t)&&e.constructor)&&r.prototype||h,e!==r)return dt(t);var e,r,n,s=[];for(n in Object(t))H.call(t,n)&&"constructor"!=n&&s.push(n);return s}function St(t,e,r,n,s,o){var i=r&B,a=t.length,u=e.length;if(a!=u&&!(i&&a<u))return!1;u=o.get(t);if(u&&o.get(e))return u==e;var h=-1,c=!0,p=r&K?new w:void 0;for(o.set(t,e),o.set(e,t);++h<a;){var l,d=t[h],f=e[h];if(void 0!==(l=n?i?n(f,d,h,e,t,o):n(d,f,h,t,e,o):l)){if(l)continue;c=!1;break}if(p){if(!function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return 1}(e,function(t,e){return!p.has(e)&&(d===t||s(d,t,r,n,o))&&p.push(e)})){c=!1;break}}else if(d!==f&&!s(d,f,r,n,o)){c=!1;break}}return o.delete(t),o.delete(e),c}function It(t){var e=Bt,r=Lt;if(e=e(t),V(t))return e;for(var n=e,s=r(t),o=-1,i=s.length,a=n.length;++o<i;)n[a+o]=s[o];return n}function E(t,e){var r,n,t=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?t["string"==typeof e?"string":"hash"]:t.map}function _(t,e){e=e;t=null==(t=t)?void 0:t[e];return Pt(t)?t:void 0}m.prototype.clear=function(){this.__data__=f?f(null):{},this.size=0},m.prototype.delete=function(t){return t=this.has(t)&&delete this.__data__[t],this.size-=t?1:0,t},m.prototype.get=function(t){var e,r=this.__data__;return f?(e=r[t])===n?void 0:e:H.call(r,t)?r[t]:void 0},m.prototype.has=function(t){var e=this.__data__;return f?void 0!==e[t]:H.call(e,t)},m.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=f&&void 0===e?n:e,this},b.prototype.clear=function(){this.__data__=[],this.size=0},b.prototype.delete=function(t){var e=this.__data__;return!((t=v(e,t))<0)&&(t==e.length-1?e.pop():pt.call(e,t,1),--this.size,!0)},b.prototype.get=function(t){var e=this.__data__;return(t=v(e,t))<0?void 0:e[t][1]},b.prototype.has=function(t){return-1<v(this.__data__,t)},b.prototype.set=function(t,e){var r=this.__data__,n=v(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this},g.prototype.clear=function(){this.size=0,this.__data__={hash:new m,map:new(l||b),string:new m}},g.prototype.delete=function(t){return t=E(this,t).delete(t),this.size-=t?1:0,t},g.prototype.get=function(t){return E(this,t).get(t)},g.prototype.has=function(t){return E(this,t).has(t)},g.prototype.set=function(t,e){var r=E(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this},w.prototype.add=w.prototype.push=function(t){return this.__data__.set(t,n),this},w.prototype.has=function(t){return this.__data__.has(t)},G.prototype.clear=function(){this.__data__=new b,this.size=0},G.prototype.delete=function(t){var e=this.__data__,t=e.delete(t);return this.size=e.size,t},G.prototype.get=function(t){return this.__data__.get(t)},G.prototype.has=function(t){return this.__data__.has(t)},G.prototype.set=function(t,e){var r=this.__data__;if(r instanceof b){var n=r.__data__;if(!l||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new g(n)}return r.set(t,e),this.size=r.size,this};var Lt=lt?function(e){if(null==e)return[];e=Object(e);for(var t=lt(e),r=function(t){return ct.call(e,t)},n=-1,s=null==t?0:t.length,o=0,i=[];++n<s;){var a=t[n];r(a,n,t)&&(i[o++]=a)}return i}:function(){return[]},$=y;function P(t){if(null!=t){try{return ot.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Tt(t,e){return t===e||t!=t&&e!=e}(o&&$(new o(new ArrayBuffer(1)))!=z||l&&$(new l)!=k||c&&$(c.resolve())!=j||d&&$(new d)!=N||s&&$(new s)!=r)&&($=function(t){var e=y(t),t=e==F?t.constructor:void 0,t=t?P(t):"";if(t)switch(t){case ft:return z;case mt:return k;case bt:return j;case gt:return N;case wt:return r}return e});var jt=Et(function(){return arguments}())?Et:function(t){return W(t)&&H.call(t,"callee")&&!ct.call(t,"callee")},V=Array.isArray;var xt=i||function(){return!1};function Ot(t){if(Ct(t))return t=y(t),t==I||t==L||t==S||t==x}function Rt(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=M}function Ct(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function W(t){return null!=t&&"object"==typeof t}var Dt,qt=t?(Dt=t,function(t){return Dt(t)}):function(t){return W(t)&&Rt(t.length)&&!!e[y(t)]};function Bt(t){return(null!=(e=t)&&Rt(e.length)&&!Ot(e)?yt:Mt)(t);var e}At.exports=function(t,e){return _t(t,e)}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(r,t,e){!function(e){!function(){var t=this.SENSORLIB||{REVISION:"0.0.1"};Object.assign(t,r("./sensors")),Object.assign(t,r("./error")),Object.assign(t,r("./actuators")),Object.assign(t,r("./util")),e.SENSORLIB=t}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./actuators":7,"./error":10,"./sensors":23,"./util":26}],3:[function(t,e,r){var n=t("./Subscriber.js");const s=t("../error/NotSupportedError");class o extends n{constructor(t,e){if(super(t,e),this.topic.messageType="std_msgs/Bool",!("mediaDevices"in navigator))throw new s("Browser does not support this feature");navigator.mediaDevices.enumerateDevices().then(t=>{t=t.filter(t=>"videoinput"===t.kind);if(0===t.length)throw Error("No camera found on this device");t=t[t.length-1];navigator.mediaDevices.getUserMedia({video:{deviceId:t.deviceId,facingMode:["user","environment"],height:{ideal:1080},width:{ideal:1920}}}).then(t=>{this.track=t.getVideoTracks()[0],this.imageCapture=new ImageCapture(this.track)})})}onMessage(t){this.imageCapture.getPhotoCapabilities().then(()=>{this.track.applyConstraints({advanced:[{torch:t.data}]})})}}e.exports=o},{"../error/NotSupportedError":8,"./Subscriber.js":5}],4:[function(t,e,r){var n=t("./Subscriber");const a=t("../error/NotSupportedError");class o extends n{constructor(t,e,r,n=!0){if(super(t,e),!(r instanceof window.HTMLCanvasElement))throw new TypeError("canvas argument must be of type HTMLCanvasElement");this.topic.messageType="sensor_msgs/CompressedImage",this.canvas=r,this.compressed=n,this.topic.messageType=this.getMessageType()}getMessageType(){return this.compressed?"sensor_msgs/CompressedImage":"sensor_msgs/Image"}onMessage(t){let e;if(this.compressed)e=o.createImageDataUrl(t.format,t.data);else{const n=document.createElement("canvas"),s=(n.width=t.width,n.height=t.height,n.getContext("2d"));var r=o.convertImageData(t.data,t.encoding,t.width*t.height),r=new window.ImageData(r,t.width,t.height);s.putImageData(r,0,0),e=n.toDataURL()}this.drawImage(e)}static createImageDataUrl(t,e){return"data:image/"+t+";base64,"+e}drawImage(t){const e=this.canvas,r=e.getContext("2d"),n=new window.Image;n.onload=function(){r.drawImage(n,0,0,e.width,e.height)},n.onerror=function(){throw Error("could not draw image")},n.src=t}static convertImageData(t,e,r){if("rgb8"!==e&&"rgba8"!==e)throw new a("Subscriber only supports uncompressed images in rgb8 or rgba8 format");var n="rgba8"===e;const s=window.atob(t),o=new Uint8ClampedArray(4*r);let i=0;for(let t=0;t<o.length;t++)n||t%4!=3?(o[t]=s.charCodeAt(i),i++):o[t]=255;return o}}e.exports=o},{"../error/NotSupportedError":8,"./Subscriber":5}],5:[function(t,e,r){e.exports=class{constructor(t,e){if(!(t instanceof ROSLIB.Ros))throw new TypeError("ros argument was not of type ROSLIB.Ros");if("string"!=typeof e)throw new TypeError("topicName argument was not of type String");this.ros=t,this.topicName=e,this.topic=new ROSLIB.Topic({ros:this.ros,name:this.topicName}),this.started=!1,this.onMessage=this.onMessage.bind(this)}onMessage(t){throw Error("onMessage method not defined!")}start(){if(this.started)throw new Error("Subscriber already started");this.topic.subscribe(this.onMessage),this.started=!0}stop(){if(!this.started)throw new Error("Subscriber did not start yet");this.topic.unsubscribe(this.onMessage),this.started=!1}}},{}],6:[function(t,e,r){t=t("./Subscriber.js");class n extends t{constructor(t,e,r){if(super(t,e),!(r instanceof window.HTMLElement))throw new TypeError("HTMLElement argument was not of type HTMLElement");this.topic.messageType="std_msgs/String",this.HTMLElement=r}onMessage(t){this.HTMLElement.innerHTML=t.data}}e.exports=n},{"./Subscriber.js":5}],7:[function(t,e,r){e.exports={FlashlightSubscriber:t("./FlashlightSubscriber"),ImageSubscriber:t("./ImageSubscriber"),TextSubscriber:t("./TextSubscriber")}},{"./FlashlightSubscriber":3,"./ImageSubscriber":4,"./TextSubscriber":6}],8:[function(t,e,r){class n extends Error{constructor(t){super(t),this.name="NotSupportedError"}}e.exports=n},{}],9:[function(t,e,r){class n extends Error{constructor(t){super(t),this.name="PermissionDeniedError"}}e.exports=n},{}],10:[function(t,e,r){e.exports={NotSupportedError:t("./NotSupportedError"),PermissionDeniedError:t("./PermissionDeniedError")}},{"./NotSupportedError":8,"./PermissionDeniedError":9}],11:[function(t,e,r){var n=t("./IntervalPublisher.js");const s=t("../error/NotSupportedError");class o extends n{constructor(t,e,r=1){if(!window.AmbientLightSensor)throw new s("Unable to create AmbientLightSensor, AmbientLight API not supported");super(t,e,r),this.topic.messageType="std_msgs/Int32",this.sensor=new AmbientLightSensor}start(){this.sensor.addEventListener("reading",t=>{this.light=this.sensor.illuminance}),this.sensor.start(),super.start()}stop(){super.stop(),this.sensor.stop(),this.sensor.removeEventListener("reading",t=>{this.light=this.sensor.illuminance})}createSnapshot(){var t=new ROSLIB.Message({data:this.light});this.msg=t,super.createSnapshot()}}e.exports=o},{"../error/NotSupportedError":8,"./IntervalPublisher.js":19}],12:[function(t,e,r){t=t("./SensorPublisher.js");class n extends t{constructor(t,e,r){if(super(t,e),!(r instanceof window.HTMLButtonElement))throw new TypeError("button argument was not of type HTMLButtonElement");this.topic.messageType="std_msgs/Bool",this.button=r;let n=!1;this.onMouseDown=function(t){t.preventDefault(),n||(n=!0,t=new ROSLIB.Message({data:!0}),this.topic.publish(t))}.bind(this),this.onMouseUp=function(t){t.preventDefault(),n&&(n=!1,t=new ROSLIB.Message({data:!1}),this.topic.publish(t))}.bind(this)}start(){this.button.addEventListener("mousedown",this.onMouseDown),this.button.addEventListener("touchstart",this.onMouseDown),this.button.addEventListener("mouseup",this.onMouseUp),this.button.addEventListener("mouseleave",this.onMouseUp),this.button.addEventListener("touchend",this.onMouseUp),this.button.addEventListener("touchcancel",this.onMouseUp),super.start()}stop(){super.stop(),this.button.removeEventListener("mousedown",this.onMouseDown),this.button.removeEventListener("touchstart",this.onMouseDown),this.button.removeEventListener("mouseup",this.onMouseUp),this.button.removeEventListener("mouseleave",this.onMouseUp),this.button.removeEventListener("touchend",this.onMouseUp),this.button.removeEventListener("touchcancel",this.onMouseUp)}}e.exports=n},{"./SensorPublisher.js":20}],13:[function(t,e,r){t=t("./IntervalPublisher");class i extends t{constructor(t,e,r,n,s=10){if(super(t,e,s),!(r instanceof window.HTMLVideoElement))throw new TypeError("camera argument was not of type HTMLVideoElement");if(!(n instanceof window.HTMLCanvasElement))throw new TypeError("canvas argument was not of type HTMLCanvasElement");this.camera=r,this.canvas=n,this.topic.messageType="sensor_msgs/CompressedImage"}start(){if(!this.camera.srcObject)throw new Error("No video source found.");super.start()}createSnapshot(){this.canvas.getContext("2d").drawImage(this.camera,0,0,this.canvas.width,this.canvas.height);const t=this.canvas.toDataURL("image/jpeg");var e=new ROSLIB.Message({format:"jpeg",data:t.replace("data:image/jpeg;base64,","")});this.msg=e,super.createSnapshot()}static readFromConfig(t,e){var r=document.getElementById(e.cameraId),n=document.getElementById(e.canvasId),s="mirte/phone_camera/"+e.name;const o=new i(t,s,r,n);return o.start(),o.setPublishFrequency(e.frequency),o}}e.exports=i},{"./IntervalPublisher":19}],14:[function(t,e,r){t=t("./SensorPublisher.js");class n extends t{constructor(t,e,r){if(super(t,e),!(r instanceof window.HTMLElement&&r.type&&"checkbox"===r.type))throw new TypeError("checkbox argument was not a HTML checkbox");this.topic.messageType="std_msgs/Bool",this.checkbox=r,this.change=function(t){t.target.checked?this.publishBoolMsg(!0):this.publishBoolMsg(!1)}.bind(this)}start(){this.checkbox.addEventListener("change",this.change),super.start()}stop(){super.stop(),this.checkbox.removeEventListener("change",this.change)}publishBoolMsg(t){t=new ROSLIB.Message({data:t});this.topic.publish(t)}}e.exports=n},{"./SensorPublisher.js":20}],15:[function(t,e,r){const n=t("../error/PermissionDeniedError.js");t=t("./IntervalPublisher.js");class s extends t{constructor(t,e,r=10){super(t,e,r),this.topic.messageType="std_msgs/Int32",this.orientationReady=!1}start(){!window.MSStream&&/iPad|iPhone|iPod|Macintosh/.test(window.navigator.userAgent)&&this.requestPermission(),window.addEventListener("deviceorientationabsolute",t=>{t.isTrusted&&this.onReadOrientation(t)},!0),super.start()}stop(){super.stop(),window.removeEventListener("deviceorientationabsolute",t=>{t.isTrusted&&this.onReadOrientation(t)},!0)}requestPermission(){const e=window.document.createElement("button");e.innerHTML="Request Motion Sensor Permission",e.addEventListener("click",()=>{if("function"==typeof window.DeviceOrientationEvent.requestPermission()||"function"==typeof window.DeviceMotionEvent.requestPermission())throw new Error("requestPermission for device orientation or device motion on iOS is not a function!");window.DeviceOrientationEvent.requestPermission().then(t=>{if("granted"===t)return e.remove(),!0;throw new n("No permission granted for Device Orientation")})}),window.document.body.appendChild(e)}onReadOrientation(t){this.alpha=Math.round(Math.abs(t.alpha-360)),this.orientationReady=!0}createSnapshot(){if(!this.orientationReady)throw Error("Orientation is not read yet!");var t=new ROSLIB.Message({data:this.alpha});this.msg=t,super.createSnapshot()}static readFromConfig(t,e){var r="mirte/phone_compass/"+e.name;const n=new s(t,r);return n.start(),n.setPublishFrequency(e.frequency),n}}e.exports=s},{"../error/PermissionDeniedError.js":9,"./IntervalPublisher.js":19}],16:[function(t,e,r){var n=t("./IntervalPublisher.js");const s=t("../error/PermissionDeniedError.js"),o=t("../error/NotSupportedError");class i extends n{constructor(t,e,r=90,n=0,s=10){if(super(t,e,s),"number"!=typeof r||"number"!=typeof n)throw new TypeError("Coordinates were not of type Number");if(90<r||r<-90||180<n||n<-180)throw new Error("Range of given coordinates is invalid");if(this.topic.messageType="std_msgs/Int32",this.compass=0,this.lat=r,this.lng=n,this.orientationReady=!1,this.gpsReady=!1,this.watchId=-1,!window.MSStream&&/iPad|iPhone|iPod|Macintosh/.test(window.navigator.userAgent)&&this.requestPermission(),!window.navigator.geolocation)throw new o("Unable to create CoordinateCompassPublisher, Geolocation API not supported")}start(){window.addEventListener("deviceorientationabsolute",t=>{t.isTrusted&&this.onReadOrientation(t)},!0),this.watchId=window.navigator.geolocation.watchPosition(this.locationHandler.bind(this),t=>{throw Error("failed to watch position")}),super.start()}stop(){super.stop(),window.navigator.geolocation.clearWatch(this.watchId)}requestPermission(){const e=window.document.createElement("button");e.innerHTML="Request Motion Sensor Permission",e.addEventListener("click",()=>{if("function"==typeof window.DeviceOrientationEvent.requestPermission()||"function"==typeof window.DeviceMotionEvent.requestPermission())throw new Error("requestPermission for device orientation or device motion on iOS is not a function!");window.DeviceOrientationEvent.requestPermission().then(t=>{if("granted"===t)return e.remove(),!0;throw new s("No permission granted for Device Orientation")})}),window.document.body.appendChild(e)}calcDegreeToPoint(t,e){if(t===this.lat&&e===this.lng)return 0;var r=this.lat*Math.PI/180,n=this.lng*Math.PI/180,t=t*Math.PI/180,e=e*Math.PI/180,r=180/Math.PI*Math.atan2(Math.sin(n-e),Math.cos(t)*Math.tan(r)-Math.sin(t)*Math.cos(n-e));let s=Math.round(r);return s=360===(s+=180)?0:s}locationHandler(t){var{latitude:t,longitude:e}=t.coords;this.compass=this.calcDegreeToPoint(t,e),this.gpsReady=!0}onReadOrientation(t){this.alpha=Math.round(Math.abs(t.alpha-360)),this.orientationReady=!0}accountForRotation(){let t=this.compass-this.alpha;return t=t<0?360+t:t}createSnapshot(){if(!this.orientationReady||!this.gpsReady)throw Error("Orientation is not read yet!");this.compass=this.accountForRotation();var t=new ROSLIB.Message({data:this.compass});this.msg=t,super.createSnapshot()}static readFromConfig(t,e){var r="mirte/phone_coordinate_compass/"+e.name;const n=new i(t,r);return n.start(),n.setPublishFrequency(e.frequency),n}}e.exports=i},{"../error/NotSupportedError":8,"../error/PermissionDeniedError.js":9,"./IntervalPublisher.js":19}],17:[function(t,e,r){var n=t("./IntervalPublisher");const s=t("../error/NotSupportedError");class o extends n{constructor(t,e,r=1){if(super(t,e,r),this.topic.messageType=o.messageType,this.watchId=-1,this.position=void 0,!window.navigator.geolocation)throw new s("Unable to create GPSPublisher, Geolocation API not supported")}static get messageType(){return"sensor_msgs/NavSatFix"}start(){var t=function(t){this.position=t}.bind(this);this.watchId=window.navigator.geolocation.watchPosition(t,function(t){throw t}),super.start()}stop(){super.stop(),window.navigator.geolocation.clearWatch(this.watchId)}static createNavSatMessage(t){return new ROSLIB.Message({latitude:t.latitude,longitude:t.longitude,position_covariance_type:0})}createSnapshot(){var t;this.position&&(t=this.position.coords,t=o.createNavSatMessage(t),this.msg=t,super.createSnapshot())}static readFromConfig(t,e){var r="mirte/phone_gps/"+e.name;const n=new o(t,r);return n.start(),n.setPublishFrequency(e.frequency),n}}e.exports=o},{"../error/NotSupportedError":8,"./IntervalPublisher":19}],18:[function(t,e,r){var n=t("./IntervalPublisher.js");const s=t("../error/PermissionDeniedError.js"),o=t("../util/MathUtils.js");class i extends n{constructor(t,e,r=5){super(t,e,r),this.topic.messageType="sensor_msgs/Imu",this.orientationReady=!1,this.motionReady=!1,this.alpha=0,this.beta=0,this.gamma=0,this.valpha=0,this.vbeta=0,this.vgamma=0,!window.MSStream&&/iPad|iPhone|iPod|Macintosh/.test(window.navigator.userAgent)&&this.requestPermission()}start(){window.addEventListener("deviceorientation",t=>{t.isTrusted&&this.onReadOrientation.bind(this)(t)}),window.DeviceMotionEvent?window.addEventListener("devicemotion",t=>{t.isTrusted&&this.onReadMotion.bind(this)(t)}):window.alert("acceleration not supported!"),super.start()}stop(){super.stop(),window.removeEventListener("deviceorientation",t=>{t.isTrusted&&this.onReadOrientation.bind(this)(t)}),window.removeEventListener("devicemotion",t=>{t.isTrusted&&this.onReadMotion.bind(this)(t)})}requestPermission(){const e=window.document.createElement("button");e.innerHTML="Request Motion Sensor Permission",e.addEventListener("click",()=>{if("function"==typeof window.DeviceOrientationEvent.requestPermission()||"function"==typeof window.DeviceMotionEvent.requestPermission())throw new Error("requestPermission for device orientation or device motion on iOS is not a function!");window.DeviceOrientationEvent.requestPermission().then(t=>{if("granted"===t)return e.remove(),!0;throw new s("No permission granted for Device Orientation")})}),window.document.body.appendChild(e)}onReadOrientation(t){this.alpha=parseFloat(t.alpha),this.beta=parseFloat(t.beta),this.gamma=parseFloat(t.gamma),this.orientationReady=!0}onReadMotion(t){var e=t.rotationRate,t=t.acceleration;this.x=t.x,this.y=t.y,this.z=t.z,this.valpha=e.alpha,this.vbeta=e.beta,this.vgamma=e.gamma,this.motionReady=!0}createSnapshot(){var t=(this.alpha+360)/360*2*Math.PI%(2*Math.PI),e=(this.beta+360)/360*2*Math.PI%(2*Math.PI),r=(this.gamma+360)/360*2*Math.PI%(2*Math.PI),e=o.quatFromEuler(e,r,t),r=new ROSLIB.Message({header:{frame_id:"world"},orientation:{x:e.x,y:e.y,z:e.z,w:e.w},orientation_covariance:[this.orientationReady?0:-1,0,0,0,0,0,0,0,0],angular_velocity:{x:this.vbeta,y:this.vgamma,z:this.valpha},angular_velocity_covariance:[this.motionReady?0:-1,0,0,0,0,0,0,0,0],linear_acceleration:{x:this.x,y:this.y,z:this.z},linear_acceleration_covariance:[this.motionReady?0:-1,0,0,0,0,0,0,0,0]});this.msg=r,super.createSnapshot()}static readFromConfig(t,e){var r="mirte/phone_imu/"+e.name;const n=new i(t,r);return n.start(),n.setPublishFrequency(e.frequency),n}}e.exports=i},{"../error/PermissionDeniedError.js":9,"../util/MathUtils.js":24,"./IntervalPublisher.js":19}],19:[function(t,e,r){var n=t("./SensorPublisher");const s=t("lodash.isequal");class o extends n{constructor(t,e,r=10){if(super(t,e),r<=0)throw new Error("Cannot construct with frequency: "+r);this.freq=r,this.msg=null,this.alReadyPublishedMsg=null}start(){var t=1e3/this.freq,e=this.createSnapshot.bind(this);this.timer=setInterval(e,t),super.start()}stop(){super.stop(),clearInterval(this.timer)}createSnapshot(){if(!this.msg)throw Error("createSnapshot has not been implemented correctly");s(this.msg,this.alReadyPublishedMsg)||(this.topic.publish(this.msg),this.alReadyPublishedMsg=this.msg)}setPublishFrequency(t){if(t<=0)throw new Error("Publisher cannot publish on frequency "+t+" Hz, frequency remained "+this.freq);this.freq=t,this.started&&(this.stop(),this.start())}}e.exports=o},{"./SensorPublisher":20,"lodash.isequal":1}],20:[function(t,e,r){e.exports=class{constructor(t,e){if(!(t instanceof ROSLIB.Ros))throw new TypeError("ros argument was not of type ROSLIB.Ros");if("string"!=typeof e)throw new TypeError("topicName argument was not of type String");if(/\s/.test(e))throw new Error("topicName argument has space");this.ros=t,this.topicName=e,this.topic=new ROSLIB.Topic({ros:this.ros,name:this.topicName}),this.started=!1}start(){if(this.started)throw new Error("Publisher already started");this.started=!0}stop(){if(!this.started)throw new Error("Publisher did not start yet");this.started=!1}static readFromConfig(t,e){throw Error("readFromConfig method not defined!")}}},{}],21:[function(t,e,r){t=t("./IntervalPublisher.js");class n extends t{constructor(t,e,r,n=8){if(super(t,e,n),!(r instanceof window.HTMLInputElement))throw new TypeError("slider argument was not of type HTMLInputElement");if("range"!==r.type)throw new TypeError("slider argument does not have type range");this.topic.messageType="std_msgs/Int32",this.slider=r}createSnapshot(){var t=parseInt(this.slider.value),t=new ROSLIB.Message({data:t});this.msg=t,super.createSnapshot()}}e.exports=n},{"./IntervalPublisher.js":19}],22:[function(t,e,r){t=t("./SensorPublisher.js");class n extends t{constructor(t,e,r,n){if(super(t,e),this.topic.messageType="std_msgs/String",this.options=void 0===n?{}:n,this.options.onEnter=void 0===this.options.onEnter||this.options.onEnter,this.options.clearOnPublish=void 0===this.options.clearOnPublish||this.options.clearOnPublish,!(r instanceof window.HTMLInputElement))throw new TypeError("input element was not of type HTMLInputElement");if(null!==r.getAttribute("type")&&"text"!==r.getAttribute("type"))throw new TypeError('Input element has to have type attribute "text"');this.inputElement=r,this.onInput=function(){this.publishMessage()}.bind(this),this.onKeyUp=function(t){"Enter"===t.key&&this.publishMessage()}.bind(this)}createStrMsg(t){return new ROSLIB.Message({data:t})}start(){this.options.onEnter?this.inputElement.addEventListener("keyup",this.onKeyUp):this.inputElement.addEventListener("input",this.onInput),super.start()}stop(){super.stop(),this.options.onEnter?this.inputElement.removeEventListener("keyup",this.onKeyUp):this.inputElement.removeEventListener("input",this.onInput)}publishMessage(){var t=new ROSLIB.Message({data:this.inputElement.value});this.topic.publish(t),this.options.clearOnPublish&&(this.inputElement.value="")}}e.exports=n},{"./SensorPublisher.js":20}],23:[function(t,e,r){e.exports={AmbientLightPublisher:t("./AmbientLightPublisher"),ButtonPublisher:t("./ButtonPublisher"),CameraPublisher:t("./CameraPublisher"),CheckboxPublisher:t("./CheckboxPublisher"),CompassPublisher:t("./CompassPublisher"),CoordinateCompassPublisher:t("./CoordinateCompassPublisher"),GPSPublisher:t("./GPSPublisher"),IMUPublisher:t("./IMUPublisher"),SliderPublisher:t("./SliderPublisher"),TextPublisher:t("./TextPublisher")}},{"./AmbientLightPublisher":11,"./ButtonPublisher":12,"./CameraPublisher":13,"./CheckboxPublisher":14,"./CompassPublisher":15,"./CoordinateCompassPublisher":16,"./GPSPublisher":17,"./IMUPublisher":18,"./SliderPublisher":21,"./TextPublisher":22}],24:[function(t,e,r){e.exports={quatFromEuler:function(t,e,r){const n=Math.cos,s=Math.sin;var o=n(t/2),i=n(e/2),a=n(r/2),t=s(t/2),e=s(e/2),r=s(r/2);return{x:t*i*a+o*e*r,y:o*e*a-t*i*r,z:o*i*r+t*e*a,w:o*i*a-t*e*r}}}},{}],25:[function(t,e,r){const i=t("../sensors/ButtonPublisher"),a=t("../sensors/CheckboxPublisher"),u=t("../actuators/ImageSubscriber"),h=t("../sensors/SliderPublisher"),c=t("../sensors/TextPublisher"),p=t("../actuators/TextSubscriber");function l(e,r,n){var s=e.id;if(!(s.length<1)){if(!(e instanceof window.HTMLElement))throw new TypeError("element was not instance of HTMLElement");let t;switch(e.constructor.name){case"HTMLButtonElement":t=new i(r,"mirte/phone_button/"+s,e);break;case"HTMLInputElement":e.type&&"range"===e.type?t=new h(r,"mirte/phone_slider/"+s,e):e.type&&"text"===e.type?t=new c(r,"mirte/phone_text_input/"+s,e):e.type&&"checkbox"===e.type&&(t=new a(r,"mirte/phone_checkbox/"+s,e));break;case"HTMLCanvasElement":t=new u(r,"mirte/phone_image_output/"+s,e);break;default:t=new p(r,"mirte/phone_text_output/"+s,e)}var o=t.topic.name;if(n.has(o))throw new Error(`topic name ${o} already published`);t.start(),n.set(o,t)}}e.exports={publishChildElements:function e(r,n,s){if(s=s||new Map,!(n instanceof ROSLIB.Ros))throw new TypeError("ros argument must be of type ROSLIB.Ros");if(!(r instanceof window.HTMLElement))throw new TypeError("parentElement argument must be of type HTMLElement");if(!(s instanceof Map))throw new TypeError("map argument must be of type Map");if(0===r.children)return s;for(let t=0;t<r.childElementCount;t++){var o=r.children[t];l(o,n,s),e(o,n,s)}return s},tryPublishElement:l}},{"../actuators/ImageSubscriber":4,"../actuators/TextSubscriber":6,"../sensors/ButtonPublisher":12,"../sensors/CheckboxPublisher":14,"../sensors/SliderPublisher":21,"../sensors/TextPublisher":22}],26:[function(t,e,r){Object.assign(e.exports,t("./mirteUtil")),Object.assign(e.exports,t("./documentUtils")),Object.assign(e.exports,t("./MathUtils"))},{"./MathUtils":24,"./documentUtils":25,"./mirteUtil":27}],27:[function(t,e,r){var n=t("../sensors/CameraPublisher"),s=t("../sensors/CompassPublisher"),o=t("../sensors/CoordinateCompassPublisher"),i=t("../sensors/GPSPublisher");const u={phone_imu:t("../sensors/IMUPublisher").readFromConfig,phone_compass:s.readFromConfig,phone_gps:i.readFromConfig,phone_point_to_coordinate:o.readFromConfig,phone_camera:n.readFromConfig};e.exports={readSensorsFromConfig:function(t,e){const r=new Map;for(const o of Object.keys(u)){var n=t[o];if(n)for(const i of Object.values(n)){const a=u[o];var s=a(e,i);r.set(s.topic.name,s)}}return r}}},{"../sensors/CameraPublisher":13,"../sensors/CompassPublisher":15,"../sensors/CoordinateCompassPublisher":16,"../sensors/GPSPublisher":17,"../sensors/IMUPublisher":18}]},{},[2]);